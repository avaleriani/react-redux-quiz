(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports={question:"styles_question__H8JpO","question-category":"styles_question-category__ERckL","question-text":"styles_question-text__YnnAp"}},14:function(e,t,n){e.exports={"game-container":"styles_game-container__1gV1-","game-screen":"styles_game-screen__dLCcX"}},21:function(e,t,n){e.exports={header:"styles_header__OoVxy"}},23:function(e,t,n){e.exports=n(38)},28:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(17),s=n.n(i),o=(n(28),n(4)),c=n(5),u=n(8),l=n(6),m=n(7),E=n(11),h=n(2),d=n(20),p=n(22),S=function(e){return Math.pow(2,e)},f=Object(h.c)({askedQuestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_ALREADY_ASKED_QUESTIONS":return[].concat(Object(p.a)(e),[t.questionId]);default:return e}},question:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_QUESTION_SUCCESS":return t.question;default:return e}},questionLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_QUESTION_LOADING":return t.isLoading;default:return e}},questionError:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_QUESTION_ERROR":return t.hasErrored;default:return e}},highestScore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_HIGHEST_SCORE":return t.score;default:return e}},currentScore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CALCULATE_CURRENT_SCORE":return t.step>0?e+S(t.step-1):0;case"RESET_CURRENT_SCORE":return 0;default:return e}},roundPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CALCULATE_ROUND_POINTS":return S(t.step);case"RESET_ROUND_POINTS":return 0;default:return e}},step:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case"ADVANCE_STEP":return e+1;case"RESET_STEP":return 0;default:return e}},userAnswerState:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ANSWER_STATE":return t.answerState;default:return e}}}),v=n(1),_=n(21),O=n.n(_),g=function(e){return a.a.createElement("div",{className:O.a.header},a.a.createElement("div",null,a.a.createElement("span",null,"Time left: "),a.a.createElement("span",null,e.timeLeft)),a.a.createElement("div",null,a.a.createElement("span",null,"Current score: "),a.a.createElement("span",null,e.currentScore)),a.a.createElement("div",null,a.a.createElement("span",null,"Highest score:"),a.a.createElement("span",null,e.highestScore)),a.a.createElement("div",null,a.a.createElement("span",null,"Round points:"),a.a.createElement("span",null,e.roundPoints)))},b=(n(35),function(e){return a.a.createElement("div",null,"Start quiz",a.a.createElement("button",{onClick:e.startGame},"Start"))}),T=n(10),y=n.n(T),w=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).state={answer:"",isWrong:!1},e.onTextUpdate=e.onTextUpdate.bind(Object(v.a)(Object(v.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(v.a)(Object(v.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onTextUpdate",value:function(e){this.setState({answer:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}(this.props.question.answer);this.isAnswerCorrect(t,this.state.answer)?(this.setState({isWrong:!1}),this.props.onSubmit(this.props.question.answer,this.state.answer)):(this.setState({isWrong:!0}),this.props.userAnswerState(!1))}},{key:"isAnswerCorrect",value:function(e,t){return e.toLowerCase()===t.toLowerCase()}},{key:"render",value:function(){return this.props.question?a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("div",{className:y.a.question},a.a.createElement("label",null,"QUESTION"),a.a.createElement("div",{className:y.a["question-category"]},this.props.question?this.props.question.category.title:""),a.a.createElement("div",{className:y.a["question-text"]},this.props.question.question)),a.a.createElement("div",{className:y.a.answer},a.a.createElement("input",{type:"text",onChange:this.onTextUpdate,autoFocus:!0})),a.a.createElement("input",{type:"submit",value:"Submit"}),this.state.isWrong?a.a.createElement("div",{className:y.a["is-wrong"]},"Wrong answer"):null):null}}]),t}(r.Component),C=(n(36),function(e){return a.a.createElement("div",null,a.a.createElement("span",{role:"img","aria-label":"party-emoji"},"\ud83d\udc10"),"You lost",a.a.createElement("span",{role:"img","aria-label":"party-emoji"},"\ud83d\udc10"),a.a.createElement("button",{onClick:e.restartGame},"Restart"))}),R=(n(37),function(e){return a.a.createElement("div",null,a.a.createElement("span",{role:"img","aria-label":"party-emoji"},"\ud83c\udf89\ud83c\udf89  \ud83c\udfc6  \ud83c\udf89\ud83c\udf89"),"Congratulations, you Win!",a.a.createElement("span",{role:"img","aria-label":"party-emoji"},"\ud83c\udf89\ud83c\udf89  \ud83c\udfc6  \ud83c\udf89\ud83c\udf89"),a.a.createElement("button",{onClick:e.restartGame},"Play again"))}),A=function(e){return{type:"USER_ANSWER_STATE",answerState:e}},N=function(e){return{type:"FETCH_QUESTION_LOADING",isLoading:e}},j=n(14),L=n.n(j),U=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={timeLeft:30,isGameEnded:!1},n.tick=n.tick.bind(Object(v.a)(Object(v.a)(n))),n.startTimer=n.startTimer.bind(Object(v.a)(Object(v.a)(n))),n.endGame=n.endGame.bind(Object(v.a)(Object(v.a)(n))),n.restartGame=n.restartGame.bind(Object(v.a)(Object(v.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"startTimer",value:function(){clearInterval(this.timer),this.setState({timeLeft:30,isGameEnded:!1}),this.timer=setInterval(this.tick,1e3)}},{key:"endGame",value:function(){clearInterval(this.timer),this.setState({timeLeft:30,isGameEnded:!0})}},{key:"restartGame",value:function(){clearInterval(this.timer),this.props.resetGame(),this.setState({timeLeft:30,isGameEnded:!1})}},{key:"tick",value:function(){this.state.timeLeft>0&&!this.props.hasErrored?this.setState(function(e){return{timeLeft:e.timeLeft-1}}):this.props.hasErrored?clearInterval(this.timer):this.endGame()}},{key:"renderScreen",value:function(e){var t=this,n=function(){e.userAnswerState?(e.fetchQuestion("".concat("https://jservice.io/","api/random"),e.step),t.startTimer()):t.endGame()};switch(e.step){case 0:return a.a.createElement(b,{startGame:n});case"301":return clearInterval(this.timer),a.a.createElement(R,{restartGame:this.restartGame});default:return a.a.createElement(w,{question:e.question,onSubmit:n,userAnswerState:function(t){e.setUserAnswerState(t)}})}}},{key:"render",value:function(){return a.a.createElement("div",{className:L.a["game-container"]},a.a.createElement(g,{timeLeft:this.state.timeLeft,currentScore:this.props.currentScore,highestScore:this.props.highestScore,roundPoints:this.props.roundPoints}),a.a.createElement("div",{className:L.a["game-screen"]},this.props.hasErrored?a.a.createElement("div",null,"ERROR"):null,this.props.isLoading?a.a.createElement("div",null,"LOADING"):null,this.props.hasErrored||this.props.isLoading||this.state.isGameEnded?null:this.renderScreen(this.props),this.state.isGameEnded?a.a.createElement(C,{restartGame:this.restartGame}):null),a.a.createElement("button",{onClick:this.restartGame},"Reset Game"))}}]),t}(r.Component),G=Object(E.b)(function(e){return{question:e.question,hasErrored:e.questionError,isLoading:e.questionLoading,step:e.step,currentScore:e.currentScore,highestScore:e.highestScore,roundPoints:e.roundPoints,userAnswerState:e.userAnswerState}},function(e){return{fetchQuestion:function(t,n){return e(function e(t,n){return function(r,a){r(N(!0)),fetch(t).then(function(e){if(!e.ok)throw Error(e.statusText);return r(N(!1)),e}).then(function(e){return e.json()}).then(function(i){var s=a(),o=s.askedQuestions,c=s.highestScore,u=s.currentScore,l=s.roundPoints,m=i[0];o[m.id]?e(t,n):(u>=c&&r({type:"UPDATE_HIGHEST_SCORE",score:u+l}),r({type:"SAVE_ALREADY_ASKED_QUESTIONS",questionId:m.id}),r(function(e){return{type:"ADVANCE_STEP",currentStep:e}}(n)),r({type:"CALCULATE_CURRENT_SCORE",step:n}),r(function(e){return{type:"CALCULATE_ROUND_POINTS",step:e}}(n)),r(function(e){return{type:"FETCH_QUESTION_SUCCESS",question:e}}(m)))}).catch(function(e){r({type:"FETCH_QUESTION_ERROR",hasErrored:!0}),console.error(e)})}}(t,n))},resetGame:function(){return e(function(e){e({type:"RESET_STEP"}),e({type:"RESET_CURRENT_SCORE"}),e({type:"RESET_ROUND_POINTS"}),e(A(!0))})},setUserAnswerState:function(t){return e(A(t))}}})(U),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.d;return Object(h.e)(f,e,t(Object(h.a)(d.a)))}(),I=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(E.a,{store:q},a.a.createElement("div",{className:"App"},a.a.createElement(G,null)))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.2e9e0571.chunk.js.map