(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(e,t,n){e.exports={question:"styles_question__H8JpO","question-category":"styles_question-category__ERckL","question-text":"styles_question-text__YnnAp",answer:"styles_answer__28LGB","button-container":"styles_button-container__3Uxj-","is-wrong":"styles_is-wrong__3WA7j",fadein:"styles_fadein__3M0ov"}},,,,,,,,function(e,t,n){e.exports={help:"styles_help__1AMBu",show:"styles_show__3-1Rz",hide:"styles_hide__2M3ky"}},,,,function(e,t,n){e.exports={lost:"styles_lost__y_8dq","lost-text":"styles_lost-text__22vQx"}},function(e,t,n){e.exports={win:"styles_win__LUObU","win-text":"styles_win-text__yLmZH"}},function(e,t,n){e.exports={"game-container":"styles_game-container__1gV1-","game-screen":"styles_game-screen__dLCcX"}},,,,,,function(e,t,n){e.exports={header:"styles_header__OoVxy"}},function(e,t,n){e.exports={welcome:"styles_welcome__2O_vC",grow:"styles_grow__Qwn4J"}},function(e,t,n){e.exports={button:"styles_button__2z_NC"}},function(e,t,n){e.exports={loading:"styles_loading__2oxd-",rotation:"styles_rotation__1Wi3Q"}},,function(e,t,n){e.exports=n(39)},,,,,function(e,t,n){},,,,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(21),i=n.n(s),o=(n(34),n(5)),c=n(6),l=n(9),u=n(7),m=n(8),E=n(11),d=n(2),h=n(23),p=n(28),_=function(e){return Math.pow(2,e)},f=Object(d.c)({askedQuestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_ALREADY_ASKED_QUESTIONS":return[].concat(Object(p.a)(e),[t.questionId]);default:return e}},question:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_QUESTION_SUCCESS":return t.question;default:return e}},questionLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_QUESTION_LOADING":return t.isLoading;default:return e}},questionError:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_QUESTION_ERROR":return t.hasErrored;default:return e}},highestScore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_HIGHEST_SCORE":return t.score;default:return e}},currentScore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CALCULATE_CURRENT_SCORE":return t.step>0?e+_(t.step-1):0;case"RESET_CURRENT_SCORE":return 0;default:return e}},roundPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CALCULATE_ROUND_POINTS":return _(t.step);case"RESET_ROUND_POINTS":return 0;default:return e}},step:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case"ADVANCE_STEP":return e+1;case"RESET_STEP":return 0;default:return e}},userAnswerState:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ANSWER_STATE":return t.answerState;default:return e}}}),v=n(1),S=n(24),g=n.n(S),y=function(e){return r.a.createElement("div",{className:g.a.header},r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("span",{role:"img","aria-label":"timer"},"\u23f2"),"\ufe0f Time left: "),r.a.createElement("span",null,e.timeLeft)),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("span",{role:"img","aria-label":"joystick"},"\ud83d\udd79\ufe0f")," Level: "),r.a.createElement("span",null,e.currentLevel)),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("span",{role:"img","aria-label":"joystick"},"\ud83c\udfae")," Current score: "),r.a.createElement("span",null,e.currentScore)),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("span",{role:"img","aria-label":"a hundred"},"\ud83d\udcaf ")," Highest score: "),r.a.createElement("span",null,e.highestScore)),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("span",{role:"img","aria-label":"dice"},"\ud83c\udfb2 ")," Round points: "),r.a.createElement("span",null,e.roundPoints)))},b=n(25),w=n.n(b),O=n(26),T=n.n(O),C=function(e){return r.a.createElement("button",{onClick:e.action?e.action:null,type:e.type?e.type:"button",className:T.a.button},e.text)},N=function(e){return r.a.createElement("div",{className:w.a.welcome},r.a.createElement("img",{src:"".concat("/react-redux-quiz","/images/logo.png"),alt:"logo"}),r.a.createElement(C,{action:e.startGame,text:"Start"}))},R=n(4),j=n.n(R),L=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={answer:"",isWrong:!1},e.onTextUpdate=e.onTextUpdate.bind(Object(v.a)(Object(v.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(v.a)(Object(v.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onTextUpdate",value:function(e){this.setState({answer:e.target.value})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.state.answer){var t=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}(this.props.question.answer);this.isAnswerCorrect(t,this.state.answer)?(this.setState({isWrong:!1}),this.props.onSubmit(this.props.question.answer,this.state.answer)):(this.setState({isWrong:!0}),this.props.userAnswerState(!1))}}},{key:"isAnswerCorrect",value:function(e,t){return e.toLowerCase()===t.toLowerCase()}},{key:"render",value:function(){return this.props.question?r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:j.a.question},r.a.createElement("div",{className:j.a["question-category"]},this.props.question?this.props.question.category.title:""),r.a.createElement("div",{className:j.a["question-text"]},this.props.question.question)),r.a.createElement("input",{placeholder:"Your answer",className:j.a.answer,type:"text",onChange:this.onTextUpdate,autoFocus:!0}),r.a.createElement("div",{className:j.a["button-container"]},this.state.isWrong?r.a.createElement("div",{className:j.a["is-wrong"]},r.a.createElement("span",{role:"img","aria-label":"thumbs-down"},"\ud83d\udc4e"),"Wrong answer",r.a.createElement("span",{role:"img","aria-label":"thumbs-down"}," \ud83d\udc4e")):null,r.a.createElement(C,{type:"submit",text:"Submit"}))):null}}]),t}(a.Component),A=n(16),x=n.n(A),U=function(e){return r.a.createElement("div",{className:x.a.lost},r.a.createElement("div",{className:x.a["lost-text"]},r.a.createElement("span",{role:"img","aria-label":"cross-emoji"},"\u274c"),r.a.createElement("span",null,"Game over "),r.a.createElement("span",{role:"img","aria-label":"cross-emoji"}," \u274c"),r.a.createElement("br",null),r.a.createElement("div",null,"Your score: ",e.score)),r.a.createElement(C,{action:e.restartGame,text:"Restart"}))},q=n(17),G=n.n(q),k=function(e){return r.a.createElement("div",{className:G.a.win},r.a.createElement("div",{className:G.a["win-text"]},r.a.createElement("span",{role:"img","aria-label":"party-emoji"},"\ud83c\udf89\ud83c\udf89  \ud83c\udfc6  \ud83c\udf89\ud83c\udf89"),r.a.createElement("div",null,"Congratulations, you Win!"),r.a.createElement("span",{role:"img","aria-label":"party-emoji"},"\ud83c\udf89\ud83c\udf89  \ud83c\udfc6  \ud83c\udf89\ud83c\udf89"),r.a.createElement("br",null),r.a.createElement("div",null,"Your score: ",e.score)),r.a.createElement(C,{action:e.restartGame,text:"Play again"}))},I=n(27),P=n.n(I),D=function(){return r.a.createElement("div",{className:P.a.loading},r.a.createElement("img",{src:"".concat("/react-redux-quiz","/images/loading.svg"),alt:"loading"}))},Q=function(e){return{type:"USER_ANSWER_STATE",answerState:e}},H=function(e){return{type:"FETCH_QUESTION_LOADING",isLoading:e}},W=n(18),F=n.n(W),V=n(12),M=n.n(V),Y=function(e){var t=[M.a.help,e.display?M.a.show:M.a.hide].join(" ");return r.a.createElement("span",{className:t,role:"img","aria-label":"question-mark","data-tooltip":e.helpText},"\u2753")},z=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={timeLeft:"30",isGameEnded:!1},n.tick=n.tick.bind(Object(v.a)(Object(v.a)(n))),n.startTimer=n.startTimer.bind(Object(v.a)(Object(v.a)(n))),n.endGame=n.endGame.bind(Object(v.a)(Object(v.a)(n))),n.restartGame=n.restartGame.bind(Object(v.a)(Object(v.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"startTimer",value:function(){clearInterval(this.timer),this.setState({timeLeft:"30",isGameEnded:!1}),this.timer=setInterval(this.tick,1e3)}},{key:"endGame",value:function(){clearInterval(this.timer),this.setState({timeLeft:"30",isGameEnded:!0})}},{key:"restartGame",value:function(){clearInterval(this.timer),this.props.resetGame(),this.setState({timeLeft:"30",isGameEnded:!1})}},{key:"tick",value:function(){this.state.timeLeft>0&&!this.props.hasErrored?this.setState(function(e){return{timeLeft:e.timeLeft-1}}):this.props.hasErrored?clearInterval(this.timer):this.endGame()}},{key:"renderScreen",value:function(e){var t=this,n=function(){e.userAnswerState?(e.fetchQuestion("".concat("https://jservice.io/","api/random"),e.step),t.startTimer()):t.endGame()};switch(e.step){case 0:return r.a.createElement(N,{startGame:n});case parseInt("30")+1:return clearInterval(this.timer),r.a.createElement(k,{score:this.props.currentScore,restartGame:this.restartGame});default:var s=this.state.timeLeft<15;return r.a.createElement(a.Fragment,null,r.a.createElement(L,{question:e.question,onSubmit:n,userAnswerState:function(t){e.setUserAnswerState(t)}}),r.a.createElement(Y,{display:s,helpText:null!==e.question?e.question.answer:""}))}}},{key:"render",value:function(){var e=!this.props.hasErrored&&!this.props.isLoading&&!this.state.isGameEnded;return r.a.createElement("div",{className:F.a["game-container"]},r.a.createElement(y,{timeLeft:this.state.timeLeft,currentScore:this.props.currentScore,highestScore:this.props.highestScore,roundPoints:this.props.roundPoints,currentLevel:this.props.step}),r.a.createElement("div",{className:F.a["game-screen"]},this.props.hasErrored?r.a.createElement("div",null,"ERROR"):null,this.props.isLoading?r.a.createElement(D,null):null,e?this.renderScreen(this.props):null,this.state.isGameEnded?r.a.createElement(U,{score:this.props.currentScore,restartGame:this.restartGame}):null))}}]),t}(a.Component),B=Object(E.b)(function(e){return{question:e.question,hasErrored:e.questionError,isLoading:e.questionLoading,step:e.step,currentScore:e.currentScore,highestScore:e.highestScore,roundPoints:e.roundPoints,userAnswerState:e.userAnswerState}},function(e){return{fetchQuestion:function(t,n){return e(function e(t,n){return function(a,r){a(H(!0)),fetch(t).then(function(e){if(!e.ok)throw Error(e.statusText);return a(H(!1)),e}).then(function(e){return e.json()}).then(function(s){var i=r(),o=i.askedQuestions,c=i.highestScore,l=i.currentScore,u=i.roundPoints,m=s[0];o[m.id]?e(t,n):(l>=c&&a({type:"UPDATE_HIGHEST_SCORE",score:l+u}),a({type:"SAVE_ALREADY_ASKED_QUESTIONS",questionId:m.id}),a(function(e){return{type:"ADVANCE_STEP",currentStep:e}}(n)),a({type:"CALCULATE_CURRENT_SCORE",step:n}),a(function(e){return{type:"CALCULATE_ROUND_POINTS",step:e}}(n)),a(function(e){return{type:"FETCH_QUESTION_SUCCESS",question:e}}(m)))}).catch(function(e){a({type:"FETCH_QUESTION_ERROR",hasErrored:!0}),console.error(e)})}}(t,n))},resetGame:function(){return e(function(e){e({type:"RESET_STEP"}),e({type:"RESET_CURRENT_SCORE"}),e({type:"RESET_ROUND_POINTS"}),e(Q(!0))})},setUserAnswerState:function(t){return e(Q(t))}}})(z),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d;return Object(d.e)(f,e,t(Object(d.a)(h.a)))}(),X=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{store:J},r.a.createElement(B,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[29,1,2]]]);
//# sourceMappingURL=main.4392d289.chunk.js.map